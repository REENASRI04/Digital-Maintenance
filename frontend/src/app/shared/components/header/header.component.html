<mat-toolbar color="primary" class="main-toolbar">
    <button mat-icon-button routerLink="/">
        <mat-icon>home</mat-icon>
    </button>
    <span class="logo">Digital Maintenance</span>

    <span class="spacer"></span>

    <ng-container *ngIf="currentUser$ | async as user; else loginButton">
        <!-- Resident Links -->
        <ng-container *ngIf="user.role === 'resident'">
            <button mat-button routerLink="/maintenance/new" routerLinkActive="active-link">
                <mat-icon>add_circle_outline</mat-icon> New Request
            </button>
            <button mat-button routerLink="/maintenance/history" routerLinkActive="active-link">
                <mat-icon>history</mat-icon> History
            </button>
        </ng-container>

        <!-- Technician Links -->
        <ng-container *ngIf="user.role === 'technician'">
            <button mat-button routerLink="/technician/dashboard" routerLinkActive="active-link">
                <mat-icon>dashboard</mat-icon> Dashboard
            </button>
        </ng-container>

        <!-- Admin Links -->
        <ng-container *ngIf="user.role === 'admin'">
            <button mat-button routerLink="/admin/dashboard" routerLinkActive="active-link">
                <mat-icon>admin_panel_settings</mat-icon> Admin
            </button>
        </ng-container>

        <span class="divider"></span>

        <div class="user-info">
            <span class="role-badge">{{ user.role | titlecase }}</span>
            <span class="username">{{ user.name }}</span>
        </div>

        <button mat-button (click)="logout()">
            <mat-icon>logout</mat-icon> Logout
        </button>
    </ng-container>

    <ng-template #loginButton>
        <button mat-button routerLink="/login">
            <mat-icon>login</mat-icon> Login
        </button>
    </ng-template>
</mat-toolbar>